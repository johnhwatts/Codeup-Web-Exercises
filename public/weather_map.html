<!DOCTYPE html>
<html>
	<head>
     <!-- responsive CSS -->
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Weather Map</title>
       
        <!-- latest compiled and minified CSS -->
		<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
        <!-- custom CSS -->
		<link rel="stylesheet" href="/css/weather_map.css">
	</head>
	<body>
        <div class="container text-center">
            <div class="jumbotron">
              <h1>Weather Map App</h1>
            </div>
              <br>
                <div class="col-sm-12 text-center cityBox"></div>
                    
              <br>
                <p><a id="refresh" class="btn btn-primary btn-lg">Search city</a></p>
                <div class="col-sm-12" id="weather"></div>
        </div>
    


        <!-- minified jQuery -->
    	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
        
        <!-- Latest compiled and minified JavaScript -->
    	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
	<script>
        "use strict";
		
        $("document").ready(function() {

            var APPID = "7f8e3aa0aad113510e0c1eaafd1c17b8";
            var url = "http://api.openweathermap.org/data/2.5/forecast/daily";

            //make a function for making an AJAX request to the OpenWeatherMap API to return a weather object
            function getWeather() {
                // the .get method takes in 2 objects, thus the comma after url; the second object is the APPID 
                $.get(url, {
                    APPID: APPID,
                    q: "San Antonio",
                    // lat: 29,423017,
                    // lon: -98.48527,
                    cnt: 3,
                    units: "imperial"
                }).fail(function(data, status) {
                    alert("Failed to load:" + status);
                }).done(function(data) {
                    console.log(data);
                    console.log(data.city.name);
                    console.log(data.list[0].humidity);
                    console.log(data.list[0].weather[0].description)

                    $('.cityBox').append(data.city.name);

                    data.list.forEach(function(day){
                    $('#weather').append("<div class='day'>" + (day.temp.max) + "°" + " / " + (day.temp.min) + "°" + "<br>" + '<img src="http://openweathermap.org/img/w/' + (day.weather[0].icon) + '.png">' + "<br>" + "Clouds: " + (day.weather[0].description) + "<br>" + "Humidity: " + (day.humidity) + "%" + "<br>" + "Wind: " + (day.speed) + " m/s" + "<br>" + "Pressure: " + (day.pressure) + "</div>");
                });
                    
                    // $('.dayTwo').append((data.list[1].temp.max) + "°" + " / " + (data.list[1].temp.min) + "°" + "<br>" + (data.list[1].weather[0].icon) + "<br>" + "Clouds: " + (data.list[1].weather[0].description) + "<br>" + "Humidity: " + (data.list[1].humidity) + "%" + "<br>" + "Wind: " + (data.list[1].speed) + " m/s" + "<br>" + "Pressure: " + (data.list[1].pressure));
                    
                    // $('.dayThree').append((data.list[2].temp.max) + "°" + " / " + (data.list[2].temp.min) + "°" + "<br>" + (data.list[2].weather[0].icon) + "<br>" + "Clouds: " + (data.list[2].weather[0].description) + "<br>" + "Humidity: " + (data.list[2].humidity) + "%" + "<br>" + "Wind: " + (data.list[2].speed) + " m/s" + "<br>" + "Pressure: " + (data.list[2].pressure));



                });

            }   



            getWeather();




        
        });
	</script>
	</body>
</html>